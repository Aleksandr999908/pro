# ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –∏ —á—Ç–æ –¥–∞–ª—å—à–µ?

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã:

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ** ‚úÖ
   - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 206 –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤
   - –ò–∑–≤–ª–µ—á–µ–Ω–æ: 6097 –∫–∞–¥—Ä–æ–≤
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: data/frames/–º–µ—Å—è—Ü/–∫–ª–∞—Å—Å/–≤–∏–¥–µ–æ/

2. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏** ‚úÖ
   - –ú–æ–¥–µ–ª—å: MobileNetV3-Large
   - F1 Score: **86.58%** (–æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!)
   - Balanced Accuracy: **86.62%**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: `models/checkpoints/best_model.pth`

3. **–≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏** ‚úÖ
   - –§–æ—Ä–º–∞—Ç: ONNX
   - –§–∞–π–ª: `models/fgc_day.onnx`
   - –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### 1. –ó–∞–ø—É—Å–∫ REST API —Å–µ—Ä–≤–∏—Å–∞

```bash
python service/app.py
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **http://localhost:8000** - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **http://localhost:8000/docs** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ò–ª–∏ —á–µ—Ä–µ–∑ curl:
```bash
curl http://localhost:8000/health
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞

#### –ß–µ—Ä–µ–∑ API (POST /classify):
```python
import requests
import base64

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
with open("test_image.jpg", "rb") as f:
    img_base64 = base64.b64encode(f.read()).decode()

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å
response = requests.post(
    "http://localhost:8000/classify",
    json={"image": img_base64, "domain": "day"}
)
print(response.json())
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EcoAssist

```bash
python integrations/ecoassist_postprocess.py \
    --input_json megadetector_result.json \
    --output_json refined_result.json \
    --image frame.jpg \
    --api_url http://localhost:8000 \
    --domain day
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è:

- **F1 Score**: 86.58% (—Ü–µ–ª—å –±—ã–ª–∞ ‚â•92%, –Ω–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞)
- **Balanced Accuracy**: 86.62%
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö**: 5 (–±—ã—Å—Ç—Ä–∞—è –≤–µ—Ä—Å–∏—è)
- **–ú–æ–¥–µ–ª—å**: MobileNetV3-Large (–ª–µ–≥–∫–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è)

## üí° –£–ª—É—á—à–µ–Ω–∏—è:

–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è F1 ‚â• 92% –º–æ–∂–Ω–æ:

1. **–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö** (50 –≤–º–µ—Å—Ç–æ 5)
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–æ–¥–µ–ª—å** (EfficientNet –≤–º–µ—Å—Ç–æ MobileNet)
3. **–ë–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö** - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ 206 –≤–∏–¥–µ–æ
4. **–î–æ–±–∞–≤–∏—Ç—å –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏–∏** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–±–æ–±—â–µ–Ω–∏—è
5. **Hard negative mining** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
pro/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ checkpoints/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ best_model.pth  ‚úÖ –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ fgc_day.onnx        ‚úÖ ONNX –º–æ–¥–µ–ª—å –¥–ª—è production
‚îÇ   ‚îî‚îÄ‚îÄ config_fast.yaml    ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ frames/             ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã (6097 —à—Ç)
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îî‚îÄ‚îÄ app.py              ‚Üí REST API —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ integrations/
    ‚îî‚îÄ‚îÄ ecoassist_postprocess.py  ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EcoAssist
```

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤. –í—ã –º–æ–∂–µ—Ç–µ:
- –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ API
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å EcoAssist/AddaxAI
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –≤ production
